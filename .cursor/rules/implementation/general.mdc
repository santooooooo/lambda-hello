---
description: プロジェクト全体の一般的なルールとガイドライン
alwaysApply: true
---

# プロジェクト全体のルール

## 言語とコミュニケーション
- **常に日本語で応答すること**
- コメント、docstring、エラーメッセージは日本語で記述すること
- 変数名、関数名、クラス名は英語で記述すること

## プロジェクト構造
このプロジェクトはドメイン駆動設計（DDD）のレイヤードアーキテクチャを採用しています：
- `domain/`: ドメインモデルとリポジトリインターフェース
- `infra/`: インフラストラクチャ層（外部API、データベース実装）
- `usecase/`: ユースケース層（ビジネスロジック）

## 依存関係の方向
- `usecase` → `domain` のみ許可
- `infra` → `domain` のみ許可
- `domain` は他のレイヤーに依存しない
- `usecase` と `infra` は直接依存しない（`domain` のインターフェースを通じて）

## エラーハンドリング
- `Either[L, R]` 型を使用してエラーハンドリングを行う
- `Left` はエラー、`Right` は成功を表す
- `fold` メソッドを使用してエラー処理を行う

## ドキュメント参照
- 機能変更時は、必ず以下のドキュメントを参照すること：
  - `.cursor/rules/business/business-knowledge.mdc`: 業務知識とドメイン知識、ビジネスルール
  - `.cursor/rules/business/business-services.mdc`: 業務サービス（ユースケース）の仕様
- ビジネスルールや業務仕様を変更する場合は、上記ドキュメントも併せて更新すること
